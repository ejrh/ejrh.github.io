---
layout: post
title: Coloured call graphs!
date: 2012-08-18 16:57:41.000000000 +12:00
categories:
- Programming
tags:
- graph theory
- graphviz
- python
- static analysis
status: publish
type: post
published: true
meta:
  _edit_last: '14086420'
  tagazine-media: a:7:{s:7:"primary";s:62:"http://ejrh.files.wordpress.com/2012/08/backup-use-and-def.png";s:6:"images";a:2:{s:62:"http://ejrh.files.wordpress.com/2012/08/backup-use-and-def.png";a:6:{s:8:"file_url";s:62:"http://ejrh.files.wordpress.com/2012/08/backup-use-and-def.png";s:5:"width";i:4255;s:6:"height";i:1211;s:4:"type";s:5:"image";s:4:"area";i:5152805;s:9:"file_path";b:0;}s:64:"http://ejrh.files.wordpress.com/2012/08/backup-use-and-group.png";a:6:{s:8:"file_url";s:64:"http://ejrh.files.wordpress.com/2012/08/backup-use-and-group.png";s:5:"width";i:2552;s:6:"height";i:1583;s:4:"type";s:5:"image";s:4:"area";i:4039816;s:9:"file_path";b:0;}}s:6:"videos";a:0:{}s:11:"image_count";i:2;s:6:"author";s:8:"14086420";s:7:"blog_id";s:8:"19263352";s:9:"mod_stamp";s:19:"2012-08-18
    04:57:41";}
  _oembed_a4fb3e2ff847d600e17d2f94a0933905: ! '{{unknown}}'
  _oembed_ecec40165de89ac3e4a2a322868b0da2: ! '{{unknown}}'
  _oembed_5cdb212d6242077d6ff65127aadeb6df: ! '{{unknown}}'
  _oembed_93ae65fd96d05517e4000a9dadfcdc94: ! '{{unknown}}'
  _oembed_f0f72a31bf3e3d62f9a6a3a56f7edd7a: ! '{{unknown}}'
  _oembed_066bd98821049bf23d0cc2ca210bc7dd: ! '{{unknown}}'
  _oembed_f0aac5d5db027012ef34c77fadf8554c: ! '{{unknown}}'
  _oembed_ef4980b65ae8fc90bfe584a71aa653da: ! '{{unknown}}'
  _oembed_e865f87fa656b050bf8f2bcc6f5d2756: ! '{{unknown}}'
  _oembed_5501bf3b19daef419029b8e94aca4d60: ! '{{unknown}}'
  _oembed_01b259487e9fb88db4ea6e7409a9cc38: ! '{{unknown}}'
  _oembed_455725470d65cdb0dbfb75a8ec419190: ! '{{unknown}}'
author: 
---
<p style="text-align:justify;"><a title="Juha Jeronon's refactoring work using pyan" href="https://yousource.it.jyu.fi/jjrandom2/miniprojects/trees/master/refactoring">Juha Jeronen</a> has added some features to the <a title="Call graphs in Python partÂ 2" href="http://ejrh.wordpress.com/2012/01/31/call-graphs-in-python-part-2/">Python call-graph generator</a> (pyan) I've previously blogged about. With a single command line, I can now get pictures like this:</p>
<p>[caption id="attachment_2303" align="aligncenter" width="640"]<a href="http://ejrh.files.wordpress.com/2012/08/backup-use-and-def.png"><img class="size-full wp-image-2303" title="backup-use-and-def" src="assets/backup-use-and-def.png" alt="" width="640" height="182" /></a> <code>pyan.py -c backup.py journal.py journalcmd.py links.py --dot | dot -Tpng &gt; backup-use-and-def.png</code>[/caption]</p>
<p style="text-align:justify;">A bit of colour always shows a program's structure in a better light. Green for the backup program, orange and blue for high-level and low-level journal manipulation, and yellow for link creation.</p>
<p style="text-align:justify;">As well as automatic colouring by namespace, there are options to control whether use- and define- edges are shown, and whether nodes in each namespaces are grouped together. For instance, instead of drawing define-edges between namespaces and their members as above, we could omit those edges and instead group them. The "fdp" layout algorithm seems to render best for this graph:</p>
<p>[caption id="attachment_2304" align="aligncenter" width="640"]<a href="http://ejrh.files.wordpress.com/2012/08/backup-use-and-group.png"><img class="size-full wp-image-2304" title="backup-use-and-group" src="assets/backup-use-and-group.png" alt="" width="640" height="396" /></a> <code>pyan.py -n -g -c backup.py journal.py journalcmd.py links.py --dot | fdp -Tpng &gt; backup-use-and-group.png</code>[/caption]</p>
<p style="text-align:justify;">Juha's colour and grouping enhancements are implemented for the GraphViz output. pyan also outputs .tgf files for yEd. But "trivial graph format" is just too trivial to support these options, so I may soon extend the program to write the more advanced .graphml format.</p>
